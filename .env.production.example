# ============================================================================
# Vibe Kanban Production Environment Configuration
# ============================================================================
#
# This file provides a template for Railway production deployment.
# Copy relevant variables to Railway → Variables tab.
#
# Documentation: See RAILWAY_ENVIRONMENT.md for complete configuration guide
# Quick Start: See docs/railway-quickstart.md for deployment steps
#
# ⚠️  NEVER commit actual production secrets to git!
# ⚠️  Use Railway's secure variable management for all sensitive values
#
# ============================================================================

# ============================================================================
# RAILWAY AUTO-PROVIDED (DO NOT SET MANUALLY)
# ============================================================================

# Railway automatically sets PORT - do not override!
# PORT=<auto-assigned-by-railway>

# ============================================================================
# DATABASE CONFIGURATION (CHOOSE ONE STRATEGY)
# ============================================================================

# --- Option A: SQLite with Railway Volume (Recommended) ---
# Requires: Railway Storage → New Volume → Mount path: /data
DATABASE_URL=sqlite:///data/db.sqlite

# --- Option B: PostgreSQL with Railway Plugin ---
# Requires: Railway → New → Database → PostgreSQL
# DATABASE_URL is auto-set by Railway PostgreSQL plugin
# DATABASE_URL=postgresql://user:pass@host:5432/railway

# ============================================================================
# GITHUB OAUTH AUTHENTICATION
# ============================================================================

# --- Option 1: Use Default Bloop AI Public App (Quickest) ---
# No configuration needed! Default client ID is baked into build.
# GITHUB_CLIENT_ID=Ov23li9bxz3kKfPOIsGm

# --- Option 2: Custom GitHub OAuth App (Recommended for Production) ---
# See RAILWAY_ENVIRONMENT.md → "GitHub OAuth Configuration" for setup steps
# Create OAuth app at: https://github.com/settings/developers
# Enable Device Flow in app settings
# Then set your client ID here:
# GITHUB_CLIENT_ID=Ov23liYourProductionClientId123

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Logging level: trace, debug, info, warn, error
# Production: info | Troubleshooting: debug
RUST_LOG=info

# Host binding (already set in Dockerfile, but can override)
# HOST=0.0.0.0

# ============================================================================
# GIT OPERATIONS TUNING
# ============================================================================

# Timeouts for git repository scanning (milliseconds)
# Increase for large repositories or slow networks
GIT_SCAN_TIMEOUT_MS=10000
GIT_SCAN_HARD_TIMEOUT_MS=20000

# Maximum directory depth for git scanning
# Lower = faster but may miss nested repos
# Higher = slower but more thorough
GIT_SCAN_MAX_DEPTH=3

# Custom directory for git worktrees
# Useful if mounting separate volume for repos
VIBE_WORKTREE_DIR=/repos/worktrees

# ============================================================================
# ANALYTICS (OPTIONAL - LEAVE EMPTY TO DISABLE)
# ============================================================================

# PostHog analytics configuration
# Get API key from: https://posthog.com → Project Settings
# Leave empty to completely disable analytics
# POSTHOG_API_KEY=phc_your_api_key_here
# POSTHOG_API_ENDPOINT=https://us.i.posthog.com

# ============================================================================
# DEBUGGING (ONLY FOR TROUBLESHOOTING)
# ============================================================================

# Disable automatic git worktree cleanup
# WARNING: This can cause disk space issues over time
# Only enable when debugging worktree issues
# DISABLE_WORKTREE_ORPHAN_CLEANUP=1

# ============================================================================
# ADVANCED: BUILD-TIME VARIABLES (RARE)
# ============================================================================
#
# These variables are compiled into the binary during build.
# Must be set in Railway variables BEFORE deploying.
# Changing these requires a full rebuild.
#
# Most users should NOT need to set these explicitly:
# - GITHUB_CLIENT_ID (set above if using custom OAuth app)
# - POSTHOG_API_KEY (set above if enabling analytics)
# - POSTHOG_API_ENDPOINT (set above if enabling analytics)
#
# Rarely needed:
# GITHUB_APP_ID=<github-app-id>  # Only if using GitHub App (not OAuth)
# GITHUB_APP_CLIENT_ID=<alternative-client-id>  # Alternative to GITHUB_CLIENT_ID
#
# ============================================================================

# ============================================================================
# SECURITY REMINDERS
# ============================================================================
#
# ✅ DO:
#   - Set these variables in Railway → Variables tab (encrypted at rest)
#   - Use Railway's shared variables for multi-service projects
#   - Rotate GITHUB_CLIENT_ID if compromised
#   - Monitor Railway audit logs regularly
#   - Set up Railway alerts for deployment failures
#
# ❌ DON'T:
#   - Never commit actual secrets to git (this file is .example only!)
#   - Never log sensitive values (app already sanitizes)
#   - Never hardcode credentials in code
#   - Never share GitHub client ID publicly (unless using default)
#   - Never use production credentials in development
#
# ============================================================================

# ============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================================================
#
# Before deploying to Railway:
# [ ] Fixed all TypeScript compilation errors
# [ ] Tested Docker build locally: docker build -t vibe-test .
# [ ] Chosen database strategy (SQLite+Volume or PostgreSQL)
# [ ] Created Railway volume (if using SQLite)
# [ ] Set required environment variables in Railway dashboard
# [ ] Created custom GitHub OAuth app (optional but recommended)
# [ ] Reviewed security best practices
# [ ] Set up Railway alerts and monitoring
# [ ] Planned backup strategy
#
# See RAILWAY_ENVIRONMENT.md for complete deployment checklist
#
# ============================================================================

# ============================================================================
# QUICK DEPLOYMENT CONFIGURATIONS
# ============================================================================

# --- Minimal Testing (No Persistence) ---
# No variables needed! Railway auto-provides PORT.
# Uses default GitHub OAuth and ephemeral database.

# --- Standard Production (Most Common) ---
# DATABASE_URL=sqlite:///data/db.sqlite  # + Railway volume
# RUST_LOG=info
# GITHUB_CLIENT_ID=<your-production-client-id>

# --- High-Scale Production ---
# <Use Railway PostgreSQL plugin for DATABASE_URL>
# RUST_LOG=info
# GITHUB_CLIENT_ID=<your-production-client-id>
# GIT_SCAN_TIMEOUT_MS=15000

# --- Debug Mode ---
# DATABASE_URL=sqlite:///data/db.sqlite
# RUST_LOG=debug
# GIT_SCAN_TIMEOUT_MS=20000
#
# ============================================================================

# For questions or issues:
# - Railway Support: https://discord.gg/railway
# - Vibe Kanban Issues: https://github.com/BloopAI/vibe-kanban/issues
# - Documentation: https://vibekanban.com/docs
